# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (Developer Guide)

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –ø—Ä–æ—Ü–µ—Å—Å—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —Å–±–æ—Ä–∫–∏ –∏ —Ä–µ–ª–∏–∑–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è **Gemini Voice Assistant**.

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–µ Desktop-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ **Python** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **PySide6** –¥–ª—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –ø–∞–∫–µ—Ç `app/`, —á—Ç–æ–±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ —Å–±–æ—Ä–∫—É.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1.  **–í—Ö–æ–¥–Ω–∞—è —Ç–æ—á–∫–∞ (`gemini_voice_assistant.py`)**:
    *   –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ ONNXRuntime, –∑–∞–ø—É—Å–∫ `QApplication`.
    *   –°–æ–∑–¥–∞–Ω–∏–µ `VoiceAssistant` –∏ `ModernWindow`, –∑–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ü–∏–∫–ª–∞.

2.  **–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ (`app/core/voice_assistant.py`)**:
    *   –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π –∞—É–¥–∏–æ-–ø–∞–π–ø–ª–∞–π–Ω, –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–æ–º–∞–Ω–¥ –∏ –≤—ã–¥–∞—á—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.
    *   `app/core/voice_assistant_audio.py` - –∑–∞–ø–∏—Å—å, VAD, Whisper, –∑–≤—É–∫–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã.
    *   `app/core/voice_assistant_commands.py` - –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ –æ—Ç–º–µ–Ω–∞.
    *   `app/core/voice_assistant_output.py` - —Å—Ç–∞—Ç—É—Å—ã, –∏—Å—Ç–æ—Ä–∏—è, –ª–æ–≥-—Ñ–∞–π–ª—ã, –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫.

3.  **–ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ (`app/ui/main_window.py`)**:
    *   `ModernWindow`, `UiSignals`, —Ç—Ä–µ–π, –æ–∫–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫, –≤–∫–ª–∞–¥–∫–∏.

4.  **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ–∫–Ω–∞ (`app/ui/handlers/`)**:
    *   –õ–æ–≥–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π UI –ø–æ –¥–æ–º–µ–Ω–∞–º: Everything, VPN, Gemini, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∏—Å—Ç–æ—Ä–∏—è.

5.  **UI-–¥–∏–∞–ª–æ–≥–∏ (`app/ui/ui_dialogs.py`)**:
    *   `LogViewerWindow`, `HistoryViewerWindow`, `FirstRunWizard`, `NoElidingDelegate`.

6.  **UI-—É—Ç–∏–ª–∏—Ç—ã (`app/ui/window_behavior.py`, `app/ui/window_snap.py`)**:
    *   –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –∏ `snap_to_screen()` –¥–ª—è –ø—Ä–∏–ª–∏–ø–∞–Ω–∏—è –æ–∫–Ω–∞.

7.  **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø—É—Ç–∏ (`app/core/app_config.py`)**:
    *   –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å–ª–æ–≤–∞—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫, –ø—É—Ç–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤.
    *   –í–∫–ª—é—á–∞–µ—Ç —Ñ–∏–∫—Å—ã –¥–ª—è PyInstaller –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ `APP_VERSION`.

8.  **–•—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (`app/core/settings_store.py`)**:
    *   –ó–∞–≥—Ä—É–∑–∫–∞/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫, –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π.

9.  **–ö–ª–∏–µ–Ω—Ç Gemini (`app/core/gemini_client.py`)**:
    *   –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞, –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏, –∑–∞–ø—Ä–æ—Å—ã –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫.

10. **Whisper Engine (`app/speech/whisper_engine.py`)**:
    *   –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π Whisper, –æ–ø—Ü–∏–∏ VAD –∏ –∑–∞–ø—É—Å–∫ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏.

11. **–ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ ONNXRuntime (`app/speech/onnxruntime_preload.py`)**:
    *   –†–∞–Ω–Ω—è—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ONNXRuntime –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ DLL-–ø—É—Ç–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ VAD.

12. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (`app/utils/logging_utils.py`)**:
    *   –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `logger` –∏ `history_logger`, –∞ —Ç–∞–∫–∂–µ —Ñ—É–Ω–∫—Ü–∏–∏ `log_message`, `log_separator`, `reset_logger`.

13. **–ê—É–¥–∏–æ-—É—Ç–∏–ª–∏—Ç—ã (`app/audio/audio_utils.py`)**:
    *   `get_microphone_list()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–≤.

14. **–°–µ—Ç–µ–≤–æ–π —Å–ª–æ–π (`app/services/vless_manager.py`)**:
    *   –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è **VLESS VPN** —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º.
    *   –£–ø—Ä–∞–≤–ª—è–µ—Ç –¥–æ—á–µ—Ä–Ω–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º `xray.exe`.
    *   –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Xray "–Ω–∞ –ª–µ—Ç—É" –∏–∑ VLESS-—Å—Å—ã–ª–∫–∏.

15. **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –∫–æ–º–∞–Ω–¥ (`app/commands/command_router.py`)**:
    *   –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ **<–æ—Ç–∫—Ä–æ–π>**, **<–∑–∞–ø—É—Å—Ç–∏>**, **<–Ω–∞–π–¥–∏>** –∏ –∑–∞–ø—É—Å–∫ –¥–µ–π—Å—Ç–≤–∏–π.
    *   –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø–∞—Å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

16. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Everything**:
    *   `app/services/everything_search.py` - –ø—É–±–ª–∏—á–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞.
    *   `app/services/everything_runtime.py` - —Ñ–∞—Å–∞–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Everything (–ø—Ä–æ—Ü–µ—Å—Å—ã, —ç–∫–∑–µ–º–ø–ª—è—Ä—ã, IPC).
    *   `app/services/everything_state.py` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞–Ω—Ç–∞–π–º–∞ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—É—Ç–µ–π.
    *   `app/services/everything_instances.py` - –ø–æ–∏—Å–∫ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ Everything –∏ —Ä–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥–Ω—ã—Ö —Å—Ç—Ä–æ–∫.
    *   `app/services/everything_ipc.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ IPC (es.exe).
    *   `app/services/everything_process.py` - –∑–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ Everything –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏.
    *   `app/services/everything_paths.py` - –ø–æ–∏—Å–∫ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—É—Ç–µ–π Everything/es.exe.
    *   `app/services/everything_gemini.py` - –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ Gemini.
    *   `app/services/everything_es.py` - –∑–∞–ø—É—Å–∫ es.exe –∏ —Å–±–æ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
    *   `app/services/everything_match.py` ‚Äî –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ä–µ–≥—ç–∫—Å–ø–∞ –∏ –≤—ã–±–æ—Ä –ª—É—á—à–µ–≥–æ –ø—É—Ç–∏.
    *   `app/services/everything_models.py` ‚Äî –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–∏—Å–∫–∞.
    *   `app/services/everything_file_filters.py` ‚Äî —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–∏–ø–∞–º —Ñ–∞–π–ª–æ–≤.

17. **–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**:
    *   `nircmd.exe`: –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∞—É–¥–∏–æ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç—å—é).
    *   `paste_text.exe`: –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π AutoHotkey —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –≤—Å—Ç–∞–≤–∫–∏ —Ç–µ–∫—Å—Ç–∞ (`Ctrl+V`).

### –ê–ª–≥–æ—Ä–∏—Ç–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥

1.  –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã: **¬´–æ—Ç–∫—Ä–æ–π¬ª**, **¬´–Ω–∞–π–¥–∏¬ª**, **¬´–∑–∞–ø—É—Å—Ç–∏¬ª**.
2.  –î–∞–ª–µ–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ä–µ–∂–∏–º—ã:
    *   **¬´–≤—ã–¥–µ–ª–∏—Ç—å¬ª** –≤–∫–ª—é—á–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º (–¥–æ–ø—É—Å–∫–∞–µ—Ç —Å–ª–æ–≤–∞ **¬´–ø—Ä–æ/—Ñ–ª–µ—à¬ª**).
    *   –ü–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–º–µ–Ω–µ–º –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–æ–º–ø—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, **¬´–¥–∏–∫—Ç–æ–≤–∫–∞¬ª**, **¬´–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç¬ª**) ‚Äî –¥–µ–π—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Ñ—Ä–∞–∑—ã.
    *   **¬´–ø—Ä–æ/—Ñ–ª–µ—à¬ª** –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç –º–æ–¥–µ–ª—å –¥–ª—è —Ç–µ–∫—É—â–µ–π —Ñ—Ä–∞–∑—ã.
3.  –ï—Å–ª–∏ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –Ω–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Ñ–∏–ª—å, –≤—ã–±—Ä–∞–Ω–Ω—ã–π –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö (`gemini_selected_prompt`).

---

## üõ† –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è **Windows 10/11** –∏ **Python 3.8+**.

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

**–í–∞–∂–Ω–æ:** –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —É—Ä–æ–≤–Ω–µ–π thinking `minimal/medium` —Ç—Ä–µ–±—É–µ—Ç—Å—è `google-genai` –≤–µ—Ä—Å–∏–∏ **1.56.0+**.

### 2. –í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—é —Ç—Ä–µ–±—É—é—Ç—Å—è –≤–Ω–µ—à–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ `PATH` –∏–ª–∏ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

*   **FFmpeg**: –î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É–¥–∏–æ `faster-whisper`.
*   **Xray**: (`xray.exe`) –¥–ª—è VLESS-—Ç—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ).
*   **NirCmd**: (`nircmd.exe`) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—É–¥–∏–æ (–Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ).
*   **Everything**: –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω–∞—è –ø–∞–ø–∫–∞ `Everything/` (Everything.exe, es.exe, Everything.lng) –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞. –•—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤. –ò–Ω–¥–µ–∫—Å—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (`*.db`, `*.ini`) –Ω–µ –∫–æ–º–º–∏—Ç—è—Ç—Å—è –∏ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ —Å–±–æ—Ä–∫—É. –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä Everything, –∫–æ—Ç–æ—Ä—ã–π –æ–Ω —Å–∞–º –∑–∞–ø—É—Å—Ç–∏–ª.

### 3. –ú–æ–¥–µ–ª–∏ Whisper

–ú–æ–¥–µ–ª–∏ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Git. –ò—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∫–∞—á–∞—Ç—å –≤—Ä—É—á–Ω—É—é –≤ –ø–∞–ø–∫—É `whisper_models/`:
*   `whisper_models/faster-whisper-small/`
*   `whisper_models/faster-whisper-medium/`

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å `config.json`, `model.bin` –∏ `vocabulary.txt`.

---

## üì¶ –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Build)

–î–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ `.exe` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **PyInstaller**. –í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏.

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–±–æ—Ä–∫–∏ 

–ü–∞–ø–∫–∞ `Build_Tools/` —Å–æ–¥–µ—Ä–∂–∏—Ç:
*   `Gemini_Voice_Assistant.spec`: –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ PyInstaller.
*   `SpecCompiler.pyw`: GUI-–æ–±–æ–ª–æ—á–∫–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–±–æ—Ä–∫–∏.
*   `hooks/`: –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ö—É–∫–∏ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ —Å–∫—Ä—ã—Ç—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

–ü–æ—Å–ª–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∫–æ–¥–∞ –ø–æ –ø–∞–ø–∫–∞–º `app/` –≤ `.spec` –æ–±–Ω–æ–≤–ª–µ–Ω—ã `added_files` –∏ `hiddenimports`, —á—Ç–æ–±—ã PyInstaller –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–∫–ª—é—á–∞–ª –º–æ–¥—É–ª–∏ –∏–∑ `app/core`, `app/speech`, `app/audio`, `app/commands`, `app/services`, `app/ui`.

–§–∞–π–ª `.spec` –¥–æ–ª–∂–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ –±—ã—Ç—å –∏—Å–∫–ª—é—á—ë–Ω –∏–∑ `.gitignore` —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `!Build_Tools/*.spec`.
–ï—Å–ª–∏ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –µ—Å—Ç—å –ø–∞–ø–∫–∞ `Everything/`, spec –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ—ë –≤ —Å–±–æ—Ä–∫—É.

### –ü—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏

1.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ `Build_Tools/SpecCompiler.pyw`.
2.  –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ `.spec` –∏–∑ —Å–ø–∏—Å–∫–∞.
3.  –ù–∞–∂–º–∏—Ç–µ **"–°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å"**.
4.  –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –ø–æ–∏—Å–∫ Everything "–∏–∑ –∫–æ—Ä–æ–±–∫–∏", —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞–ø–∫–∞ `Everything/` –ª–µ–∂–∏—Ç –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π.

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —Å–∫—Ä–∏–ø—Ç `post_build.py` (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω), –∫–æ—Ç–æ—Ä—ã–π:
1.  –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç –≥–æ—Ç–æ–≤—ã–π `.exe` –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞.
2.  –°–∫–æ–ø–∏—Ä—É–µ—Ç –ø–∞–ø–∫—É `whisper_models` –≤ `_internal` –∏–ª–∏ —Ä—è–¥–æ–º —Å executable (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞ —Å–±–æ—Ä–∫–∏).
3.  –û—á–∏—Å—Ç–∏—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞–ø–∫–∏ `build` –∏ `dist`.

---


## üíª –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Code Style)

1.  **–Ø–∑—ã–∫**: –ö–æ–¥ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚Äî **–†—É—Å—Å–∫–∏–π**.
2.  **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `app.utils.logging_utils` –∏ —Ñ—É–Ω–∫—Ü–∏–∏ `log_message`/`log_separator`.
    *   `log_message()`: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è.
    *   `logging_utils.logger.debug()`: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—Ç–ª–∞–¥–∫–∞.
    *   `logging_utils.logger.error(..., exc_info=True)`: –û—à–∏–±–∫–∏ —Å traceback.
3.  **–ò—Å–∫–ª—é—á–µ–Ω–∏—è**: –ù–µ "–≥–ª–æ—Ç–∞—Ç—å" –æ—à–∏–±–∫–∏. –ï—Å–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–æ, –æ–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–æ –∏–ª–∏ –ø–æ–∫–∞–∑–∞–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
4.  **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: –¢—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Å–µ—Ç—å, –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π) –Ω–µ –¥–æ–ª–∂–Ω—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å GUI –ø–æ—Ç–æ–∫ (`MainThread`). –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `QThread` –∏–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã.
5.  **–õ–∏–Ω—Ç–∏–Ω–≥**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ruff` —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –≤ `pyproject.toml` (`python -m ruff check .`).
6.  **–†–∞–∑–º–µ—Ä –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞**: `gemini_voice_assistant.py` ‚Äî —Ç–æ–ª—å–∫–æ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –∑–∞–ø—É—Å–∫ UI, —Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–∏—Å–æ–≤). –õ—é–±–∞—è –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –∂–∏—Ç—å –≤ –º–æ–¥—É–ª—è—Ö `app/`. –ï—Å–ª–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–π –±–ª–æ–∫ –ª–æ–≥–∏–∫–∏ –∫—Ä—É–ø–Ω–µ–µ ~200‚Äì300 —Å—Ç—Ä–æ–∫ –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–æ–¥—Å–∏—Å—Ç–µ–º–∞, –≤—ã–Ω–æ—Å–∏—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª/–ø–∞–∫–µ—Ç –∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—å —á–µ—Ä–µ–∑ –∏–º–ø–æ—Ä—Ç.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```text
Gemini_Voice_Assistant/
‚îú‚îÄ‚îÄ gemini_voice_assistant.py       # MAIN ENTRY POINT
‚îú‚îÄ‚îÄ app/                            # –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞–∫–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app_config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –ø—É—Ç–∏, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings_store.py       # –ó–∞–≥—Ä—É–∑–∫–∞/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫, –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gemini_client.py        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Gemini –∏ –∑–∞–ø—Ä–æ—Å—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ voice_assistant.py      # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ voice_assistant_audio.py    # –ê—É–¥–∏–æ-–ø–∞–π–ø–ª–∞–π–Ω (Whisper/VAD/–∑–≤—É–∫–∏)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ voice_assistant_commands.py # –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ voice_assistant_output.py   # –°—Ç–∞—Ç—É—Å—ã, –∏—Å—Ç–æ—Ä–∏—è, –ª–æ–≥–∏, –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
‚îÇ   ‚îú‚îÄ‚îÄ speech/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ whisper_engine.py       # Whisper: –º–æ–¥–µ–ª–∏, –æ–ø—Ü–∏–∏, —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ onnxruntime_preload.py  # –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ ONNXRuntime –∏ DLL-–ø—É—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ audio/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ audio_utils.py          # –ê—É–¥–∏–æ-—É—Ç–∏–ª–∏—Ç—ã (–º–∏–∫—Ä–æ—Ñ–æ–Ω—ã)
‚îÇ   ‚îú‚îÄ‚îÄ commands/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ command_router.py       # –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui_dialogs.py           # UI-–¥–∏–∞–ª–æ–≥–∏ –∏ –¥–µ–ª–µ–≥–∞—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main_window.py          # –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ –∏ —Å–∏–≥–Ω–∞–ª—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/               # –î–æ–º–µ–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ–∫–Ω–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ everything_handlers.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gemini_handlers.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ history_handlers.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings_handlers.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ vpn_handlers.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ window_behavior.py      # –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ/resize –æ–∫–Ω–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ window_shell.py         # –ö–∞—Ä–∫–∞—Å –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ window_signals.py       # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ window_snap.py          # –ü—Ä–∏–ª–∏–ø–∞–Ω–∏–µ –æ–∫–Ω–∞ –∫ –∫—Ä–∞—è–º —ç–∫—Ä–∞–Ω–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tabs/                   # –í–∫–ª–∞–¥–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vless_manager.py        # –ú–æ–¥—É–ª—å VPN
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ everything_search.py    # –ü—É–±–ª–∏—á–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–∏—Å–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ everything_runtime.py   # Everything: –ø—Ä–æ—Ü–µ—Å—Å—ã, —ç–∫–∑–µ–º–ø–ª—è—Ä—ã, IPC
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ everything_state.py     # Everything: —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞–Ω—Ç–∞–π–º–∞ –∏ –ø—É—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ everything_instances.py # Everything: –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∏ cmdline
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ everything_ipc.py       # Everything: IPC –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å es.exe
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ everything_process.py   # Everything: –∑–∞–ø—É—Å–∫ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ everything_paths.py     # –ü–æ–∏—Å–∫ –ø—É—Ç–µ–π Everything/es.exe
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ everything_models.py    # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∏—Å–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ everything_gemini.py    # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ Gemini
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ everything_es.py        # –ó–∞–ø—É—Å–∫ es.exe –∏ —á—Ç–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ everything_match.py     # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ä–µ–≥—ç–∫—Å–ø–∞ –∏ –≤—ã–±–æ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ everything_file_filters.py # –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–∏–ø–∞–º —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îî‚îÄ‚îÄ logging_utils.py        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ö–µ–ª–ø–µ—Ä—ã –ª–æ–≥–æ–≤
‚îú‚îÄ‚îÄ Build_Tools/                    # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ Everything/                     # –ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–π Everything (–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
‚îú‚îÄ‚îÄ whisper_models/                 # –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏ (gitignored)
‚îú‚îÄ‚îÄ settings.json                   # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (gitignored)
‚îú‚îÄ‚îÄ gemini_voice_assistant.log      # –õ–æ–≥–∏ (gitignored)
‚îú‚îÄ‚îÄ VERSION                         # –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è
‚îî‚îÄ‚îÄ README.md                       # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```
